# Configuration for macOS Automated Setup

# Git Configuration
GIT_USERNAME="FainiDenis"
GIT_EMAIL="dtf8841@rit.edu"

# Java Configuration
JAVA_VERSION="24"
JAVA_HOME="/Library/Java/JavaVirtualMachines/jdk-$JAVA_VERSION.jdk/Contents/Home"

# Maven Configuration
MAVEN_VERSION="3.9.11"
MAVEN_INSTALL_DIR="/usr/local/maven"
MAVEN_HOME="$MAVEN_INSTALL_DIR/apache-maven-$MAVEN_VERSION"
MAVEN_BIN_URL="https://dlcdn.apache.org/maven/maven-3/$MAVEN_VERSION/binaries/apache-maven-$MAVEN_VERSION-bin.zip"

# Directory Configuration
SCREENSHOT_DIR="$HOME/Screenshots"

# Homebrew Configuration
HOMEBREW_UPDATE_FREQUENCY="86400"
HOMEBREW_NO_INSTALL_CLEANUP=1

# Homebrew Formulae
FORMULAE=(
    "tree" "htop" "nmap" "curl" "wget" "git" "python@3" "mas" "dockutil"
)

# Homebrew Casks
CASKS=(
    "firefox" "rectangle" "appcleaner" "hazel" "vlc" "stremio"
    "visual-studio-code" "iterm2" "libreoffice" "mountain-duck"
)

# Casks that require sudo
SUDO_CASKS=(
    "displaylink" "oracle-jdk" "zoom" "tailscale" "windows-app"
)

# VSCode Extensions
VSCODE=(
    "esbenp.prettier-vscode" "foxundermoon.shell-format" "GitHub.copilot"
    "sourcegraph.cody-ai" "eamodio.gitlens" "github.vscode-pull-request-github"
)

# App Store Applications
APPSTORE=(
    "897118787"    # Shazam
    "1530145038"   # Amperfy Music
    "1564384601"   # Evermusic
)

# macOS System Settings
SETTINGS=(
    "defaults write -g com.apple.mouse.scaling 3"
    "defaults write -g com.apple.trackpad.scaling 3"
    "defaults write com.apple.driver.AppleBluetoothMultitouch.mouse MouseButtonMode TwoButton"
    "defaults write -g AppleShowAllExtensions -bool true"
    "defaults write com.apple.finder AppleShowAllFiles true"
    "defaults write com.apple.finder ShowPathbar -bool true"
    "defaults write com.apple.finder ShowStatusBar -bool true"
    "defaults write com.apple.finder _FXSortFoldersFirst -bool true"
    "defaults write com.apple.finder FXEnableExtensionChangeWarning -bool false"
    "defaults write com.apple.dock autohide -bool true"
    "defaults write com.apple.dock show-recents -bool false"
    "defaults write com.apple.LaunchServices LSQuarantine -bool false"
    "defaults write com.apple.screencapture location '$SCREENSHOT_DIR'"
    "defaults write com.apple.screencapture type png"
    "defaults write com.apple.dock mru-spaces -bool false"
    "chflags nohidden ~/Library"
)

# Dock Configuration
DOCK_REPLACE=(
    "/Applications/Firefox.app|Safari"
    "/Applications/Visual Studio Code.app|Launchpad"
)

DOCK_ADD=(
    "/Applications/iTerm.app"
    "/Applications/Microsoft Teams (work or school).app"
    "/System/Applications/System Preferences.app"
)

DOCK_REMOVE=(
    "Messages" "Maps" "Photos" "Reminders" "FaceTime" "Contacts"
    "TV" "Music" "Mail" "News" "Stocks" "Home" "Podcasts" "Find My"
)

# Directory Creation
DIRECTORIES_TO_CREATE=(
    "$SCREENSHOT_DIR"
)

# Validation Function
validate_config() {
    local errors=()
    
    [[ -z "$GIT_USERNAME" ]] && errors+=("GIT_USERNAME not set")
    [[ -z "$GIT_EMAIL" ]] && errors+=("GIT_EMAIL not set")
    [[ -z "$JAVA_VERSION" ]] && errors+=("JAVA_VERSION not set")
    
    # Check email format
    [[ -n "$GIT_EMAIL" ]] && [[ ! "$GIT_EMAIL" =~ ^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$ ]] &&
        errors+=("GIT_EMAIL format is invalid")
    
    if [[ ${#errors[@]} -gt 0 ]]; then
        printf '%s\n' "${errors[@]}" >&2
        return 1
    fi
    
    return 0
}